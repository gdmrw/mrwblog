<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How to make QNAP NAS DDNS functional while using Tproxy | Mr.W's Blog</title>
<meta name=keywords content="qnap nas,ddns,openwrt,HBS"><meta name=description content="Prerequisite: Before proceeding, it is essential to have a static public IP. If you do not already have one, kindly reach out to your ISP for assistance. Please note that if you are unfamiliar with QNAP NAS, this article may not cater to your requirements.
For several reasons, you cannot connect to many cloud storage server like google drive in China, which make it difficult to fully function the HBS3(Hybrid Backup Sync)."><meta name=author content="Mr.W"><link rel=canonical href=https://examplesite.com/posts/qnap_ddns/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.ded0589eedaa02331bfc83bd361957c3984fb9f4eef66aa3b3e4261189e20ca3.css integrity="sha256-3tBYnu2qAjMb/IO9NhlXw5hPufTu9mqjs+QmEYniDKM=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://examplesite.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://examplesite.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://examplesite.com/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://examplesite.com/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://examplesite.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="How to make QNAP NAS DDNS functional while using Tproxy"><meta property="og:description" content="Prerequisite: Before proceeding, it is essential to have a static public IP. If you do not already have one, kindly reach out to your ISP for assistance. Please note that if you are unfamiliar with QNAP NAS, this article may not cater to your requirements.
For several reasons, you cannot connect to many cloud storage server like google drive in China, which make it difficult to fully function the HBS3(Hybrid Backup Sync)."><meta property="og:type" content="article"><meta property="og:url" content="https://examplesite.com/posts/qnap_ddns/"><meta property="og:image" content="https://examplesite.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-03-08T21:55:34+00:00"><meta property="article:modified_time" content="2023-03-08T21:55:34+00:00"><meta property="og:site_name" content="ExampleSite"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://examplesite.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="How to make QNAP NAS DDNS functional while using Tproxy"><meta name=twitter:description content="Prerequisite: Before proceeding, it is essential to have a static public IP. If you do not already have one, kindly reach out to your ISP for assistance. Please note that if you are unfamiliar with QNAP NAS, this article may not cater to your requirements.
For several reasons, you cannot connect to many cloud storage server like google drive in China, which make it difficult to fully function the HBS3(Hybrid Backup Sync)."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://examplesite.com/posts/"},{"@type":"ListItem","position":2,"name":"How to make QNAP NAS DDNS functional while using Tproxy","item":"https://examplesite.com/posts/qnap_ddns/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How to make QNAP NAS DDNS functional while using Tproxy","name":"How to make QNAP NAS DDNS functional while using Tproxy","description":"Prerequisite: Before proceeding, it is essential to have a static public IP. If you do not already have one, kindly reach out to your ISP for assistance. Please note that if you are unfamiliar with QNAP NAS, this article may not cater to your requirements.\nFor several reasons, you cannot connect to many cloud storage server like google drive in China, which make it difficult to fully function the HBS3(Hybrid Backup Sync).","keywords":["qnap nas","ddns","openwrt","HBS"],"articleBody":" Prerequisite: Before proceeding, it is essential to have a static public IP. If you do not already have one, kindly reach out to your ISP for assistance. Please note that if you are unfamiliar with QNAP NAS, this article may not cater to your requirements.\nFor several reasons, you cannot connect to many cloud storage server like google drive in China, which make it difficult to fully function the HBS3(Hybrid Backup Sync). To solve those problem, I add a proxy gateway to my family network and make some configuration to make sQure the Transparent proxy working properly. However, this led to troubles with the Dynamic Domain Name System (DDNS) due to the changes in configuration. This issue had persisted for quite some time until I finally discovered the solution to the mystery.\nInitially, I encountered issues with Myqnapcloud DDNS not functioning despite correctly configuring port forwarding or DMZ on my router. However, upon inspecting the DDNS IP address and comparing it with my public IP, I discovered that they did not match. I was surprised to find that the DDNS was erroneously pointing to my proxy IP. After couples of searches, finally I realized that I was not fully familiar with the working principle of DDNS, and the proxy routing function treated the DDNS server data as a flow requiring proxy, causing the issue.\nIn order to solve the above problems,you need to take the following steps:\n1.Filed a ticket with QNAP to obtain a list of their ddns name servers.\n2.Added these servers to your routing rules to ensure a direct connection when the ddns name server tries to trace the correct IP.\n3.Ensured that the port mapping/port forwarding function is enabled and properly configured in both the router and proxy gateway. This needs to be done twice to ensure that the correct ports are open on both sides.\nhttps://auth.api.myqnapcloud.com https://auth.myqnapcloud.io https://edge.api.myqnapcloud.com https://edge.myqnapcloud.io https://core2.api.myqnapcloud.com https://core2.myqnapcloud.io\nThe above list is what I know QNAP use for DDNS, if no, raise a ticket to ask them again.\nYour myqnapcloud may functioning now. Overall, it is not a formidable cases when you know the running theory of DDNS and Tproxy. Myqnapcloud is a good app, it help me save a lot of configuration step, but at the same time, it also makes me omit some underlying logic of DDNS and hinder me to solve the wrong pointing issue.\n","wordCount":"396","inLanguage":"en","datePublished":"2023-03-08T21:55:34Z","dateModified":"2023-03-08T21:55:34Z","author":{"@type":"Person","name":"Mr.W"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://examplesite.com/posts/qnap_ddns/"},"publisher":{"@type":"Organization","name":"Mr.W's Blog","logo":{"@type":"ImageObject","url":"https://examplesite.com/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://examplesite.com/ accesskey=h title="Home (Alt + H)"><img src=https://examplesite.com/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://examplesite.com/archives/ title=Archieves><span>Archieves</span></a></li><li><a href=https://examplesite.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://examplesite.com/archive/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://examplesite.com/>Home</a>&nbsp;»&nbsp;<a href=https://examplesite.com/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">How to make QNAP NAS DDNS functional while using Tproxy</h1><div class=post-meta><span title='2023-03-08 21:55:34 +0000 UTC'>March 8, 2023</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;396 words&nbsp;·&nbsp;Mr.W</div></header><div class=post-content><blockquote><p>Prerequisite: Before proceeding, it is essential to have a static public IP. If you do not already have one, kindly reach out to your ISP for assistance. Please note that if you are unfamiliar with QNAP NAS, this article may not cater to your requirements.</p></blockquote><hr><p>For several reasons, you cannot connect to many cloud storage server like google drive in China, which make it difficult to fully function the HBS3(Hybrid Backup Sync). To solve those problem, I add a proxy gateway to my family network and make some configuration to make sQure the Transparent proxy working properly. However, this led to troubles with the Dynamic Domain Name System (DDNS) due to the changes in configuration. This issue had persisted for quite some time until I finally discovered the solution to the mystery.</p><p>Initially, I encountered issues with Myqnapcloud DDNS not functioning despite correctly configuring port forwarding or DMZ on my router. However, upon inspecting the DDNS IP address and comparing it with my public IP, I discovered that they did not match. I was surprised to find that the DDNS was erroneously pointing to my proxy IP. After couples of searches, finally I realized that I was not fully familiar with the working principle of DDNS, and the proxy routing function treated the DDNS server data as a flow requiring proxy, causing the issue.</p><p>In order to solve the above problems,you need to take the following steps:</p><ul><li><p><strong>1.Filed a ticket with QNAP to obtain a list of their ddns name servers.</strong></p></li><li><p><strong>2.Added these servers to your routing rules to ensure a direct connection when the ddns name server tries to trace the correct IP.</strong></p></li><li><p><strong>3.Ensured that the port mapping/port forwarding function is enabled and properly configured in both the router and proxy gateway. This needs to be done twice to ensure that the correct ports are open on both sides.</strong></p></li></ul><blockquote><p><a href=https://auth.api.myqnapcloud.com>https://auth.api.myqnapcloud.com</a>
<a href=https://auth.myqnapcloud.io>https://auth.myqnapcloud.io</a>
<a href=https://edge.api.myqnapcloud.com>https://edge.api.myqnapcloud.com</a>
<a href=https://edge.myqnapcloud.io>https://edge.myqnapcloud.io</a>
<a href=https://core2.api.myqnapcloud.com>https://core2.api.myqnapcloud.com</a>
<a href=https://core2.myqnapcloud.io>https://core2.myqnapcloud.io</a></p></blockquote><p>The above list is what I know QNAP use for DDNS, if no, raise a ticket to ask them again.</p><p>Your myqnapcloud may functioning now. Overall, it is not a formidable cases when you know the running theory of DDNS and Tproxy. Myqnapcloud is a good app, it help me save a lot of configuration step, but at the same time, it also makes me omit some underlying logic of DDNS and hinder me to solve the wrong pointing issue.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://examplesite.com/tags/qnap-nas/>qnap nas</a></li><li><a href=https://examplesite.com/tags/ddns/>ddns</a></li><li><a href=https://examplesite.com/tags/openwrt/>openwrt</a></li><li><a href=https://examplesite.com/tags/hbs/>HBS</a></li></ul><nav class=paginav><a class=prev href=https://examplesite.com/posts/megacmd/><span class=title>« Prev</span><br><span>How to enter QNAP NAS Mega CMD</span>
</a><a class=next href=https://examplesite.com/posts/middle_box/><span class=title>Next »</span><br><span>How Middleboxs Identify Proxy Traffics</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://examplesite.com/>Mr.W's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>